<!doctype html>
<html lang=" en-US ">

<head>
    <meta charset="utf-8">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=88e715cdd6e0bd047c7d68b39d123a466842e492">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="/assets/js/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="/assets/css/ie.css">
    <![endif]-->

    
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        
    
</head>

<body>
    <div id="header">
            <nav>
        <li><a href="https://github.com/ULL-MII-SYTWS-1920/ull-mii-sytws-1920.github.io/tree/master//tema2-async/event-loop/exercises/web-workers/node_modules/qs/README.md" title="Edit this page at GitHub">üêô</a>
        </li>
        <li><a href="/search" title="search">&#x1F50D;</a></li>
       
        <li><a href="/resources.html" title="resources">&#x2699</a></li>
        <li><a href="/timetables.html" title="horarios">&#x1f5d3</a></li>
        <li><a href="/references.html" title="bibliografia">&#x1f4da</a></li>
        <li><a href="/practicas.html" title="pr√°cticas">&#x270d</a></li>
        

        <li><a href="/clases.html" title="clases">üë®‚Äçüè´</a></li>
        <li><a href="/index.html" title="Home page">&#x1f3e0</a></li>
        <li><a href="/tema0-presentacion/" title="Tema 0: Presentaci√≥n">0</a></li>
        <li><a href="/tema1-introduccion/" title="Tema 1: introducci√≥n">1</a></li>
        <li><a href="/tema2-async/" title="Tema 2: Async">2</a></li>
        <li><a href="/tema3-web/" title="Tema 3: Web">3</a></li>
        <li><a href="/tema4-devops/" title="Tema 4: Devops">4</a></li>
        
    </nav>

    </div>
    <!-- end header -->


    <div class="wrapper">

        <section>
           
<div id="title">
        <h1>Sistemas y Tecnolog√≠as Web: Servidor</h1>
        <p> Master de II. ULL. 1er cuatrimestre. 2020/2021</p>
        <hr>
        <span class="credits left">Organization <a href="https://github.com/ULL-MII-SYTWS-2021" target="_blank">ULL-MII-SYTWS-2021</a></span>
        <span class="credits left"> &nbsp; Classroom <a href="https://classroom.github.com/classrooms/68184806-ull-mii-sytws-2021" target="_blank">ULL-MII-SYTWS-2021</a></span>
        <span class="credits left"> &nbsp; Campus Virtual <a href="https://campusdoctoradoyposgrado.ull.es/course/view.php?id=2020111300" target="_blank">SYTWS</a></span>
        <span class="credits left"> &nbsp; Chat <a href="https://chat.google.com/u/1/room/AAAAp18fCE8" target="_blank">Chat</a></span>
        <span class="credits left"> &nbsp; Profesor <a href="https://www.ull.es/apps/guias/guias/view_teacher_niu/745/(%3FPcrguezl.*)/" target="_blank">Casiano</a></span>
    </div>

<!--

<div id="title">
    <h1>Sistemas y Tecnolog√≠as Web: Servidor</h1>
    <p> Master de II. ULL. 1er cuatrimestre. 2020/2021</p>
    <hr>
    <span class="credits left">Organization <a href="https://github.com/ULL-MII-SYTWS-1920"
            target="_blank">ULL-MII-SYTWS-1920</a></span>
    <span class="credits left"> &nbsp; Github Classroom <a
            href="https://classroom.github.com/classrooms/55384072-master-de-ingenieria-informatica-sistemas-y-tecnologias-web-servidor-classroom"
            target="_blank">SYTWS 19/20</a></span>
    <span class="credits left"> &nbsp; Campus Virtual <a
            href="https://campusvirtual.ull.es/1920/course/view.php?id=201913778" target="_blank">SYTWS
            19/20</a></span>
    <span class="credits left"> &nbsp; Profesor <a
            href="https://www.ull.es/apps/guias/guias/view_teacher_niu/588/(%3FPcrguezl.*)/"" target="
            _blank">Casiano</a></span>
</div>
-->    


           
            <h2 >Table of Contents</h2>
           
            <ul id="sytwstoc">
  <li><a href="#qs-">qs <sup><a href="https://npmjs.org/package/qs"><img src="http://versionbadg.es/ljharb/qs.svg" alt="Version Badge" /></a></sup></a>
    <ul>
      <li><a href="#usage">Usage</a>
        <ul>
          <li><a href="#parsing-objects">Parsing Objects</a></li>
          <li><a href="#parsing-arrays">Parsing Arrays</a></li>
          <li><a href="#stringifying">Stringifying</a></li>
          <li><a href="#handling-of-null-values">Handling of <code class="language-plaintext highlighter-rouge">null</code> values</a></li>
          <li><a href="#dealing-with-special-character-sets">Dealing with special character sets</a></li>
          <li><a href="#rfc-3986-and-rfc-1738-space-encoding">RFC 3986 and RFC 1738 space encoding</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>
        

            <div class="container">
                <h1 id="qs-">qs <sup><a href="https://npmjs.org/package/qs"><img src="http://versionbadg.es/ljharb/qs.svg" alt="Version Badge" /></a></sup></h1>

<p><a href="https://travis-ci.org/ljharb/qs"><img src="https://api.travis-ci.org/ljharb/qs.svg" alt="Build Status" /></a>
<a href="https://david-dm.org/ljharb/qs"><img src="https://david-dm.org/ljharb/qs.svg" alt="dependency status" /></a>
<a href="https://david-dm.org/ljharb/qs?type=dev"><img src="https://david-dm.org/ljharb/qs/dev-status.svg" alt="dev dependency status" /></a>
<a href="/tema2-async/event-loop/exercises/web-workers/node_modules/qs/LICENSE"><img src="http://img.shields.io/npm/l/qs.svg" alt="License" /></a>
<a href="http://npm-stat.com/charts.html?package=qs"><img src="http://img.shields.io/npm/dm/qs.svg" alt="Downloads" /></a></p>

<p><a href="https://npmjs.org/package/qs"><img src="https://nodei.co/npm/qs.png?downloads=true&amp;stars=true" alt="npm badge" /></a></p>

<p>A querystring parsing and stringifying library with some added security.</p>

<p>Lead Maintainer: <a href="https://github.com/ljharb">Jordan Harband</a></p>

<p>The <strong>qs</strong> module was originally created and maintained by <a href="https://github.com/visionmedia/node-querystring">TJ Holowaychuk</a>.</p>

<h2 id="usage">Usage</h2>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">qs</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">qs</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">assert</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">assert</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a=c</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span> <span class="p">});</span>

<span class="kd">var</span> <span class="nx">str</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">str</span><span class="p">,</span> <span class="dl">'</span><span class="s1">a=c</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="parsing-objects">Parsing Objects</h3>

<p><a href="#preventEval"></a></p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">string</span><span class="p">,</span> <span class="p">[</span><span class="nx">options</span><span class="p">]);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>qs</strong> allows you to create nested objects within your query strings, by surrounding the name of sub-keys with square brackets <code class="language-plaintext highlighter-rouge">[]</code>.
For example, the string <code class="language-plaintext highlighter-rouge">'foo[bar]=baz'</code> converts to:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">foo[bar]=baz</span><span class="dl">'</span><span class="p">),</span> <span class="p">{</span>
    <span class="na">foo</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">bar</span><span class="p">:</span> <span class="dl">'</span><span class="s1">baz</span><span class="dl">'</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>When using the <code class="language-plaintext highlighter-rouge">plainObjects</code> option the parsed value is returned as a null object, created via <code class="language-plaintext highlighter-rouge">Object.create(null)</code> and as such you should be aware that prototype methods will not exist on it and a user may set those names to whatever value they like:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">nullObject</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a[hasOwnProperty]=b</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">plainObjects</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">nullObject</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="p">{</span> <span class="na">hasOwnProperty</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span> <span class="p">}</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>By default parameters that would overwrite properties on the object prototype are ignored, if you wish to keep the data from those fields either use <code class="language-plaintext highlighter-rouge">plainObjects</code> as mentioned above, or set <code class="language-plaintext highlighter-rouge">allowPrototypes</code> to <code class="language-plaintext highlighter-rouge">true</code> which will allow user input to overwrite those properties. <em>WARNING</em> It is generally a bad idea to enable this option as it can cause problems when attempting to use the properties that have been overwritten. Always be careful with this option.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">protoObject</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a[hasOwnProperty]=b</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">allowPrototypes</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">protoObject</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="p">{</span> <span class="na">hasOwnProperty</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span> <span class="p">}</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>URI encoded strings work too:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a%5Bb%5D=c</span><span class="dl">'</span><span class="p">),</span> <span class="p">{</span>
    <span class="na">a</span><span class="p">:</span> <span class="p">{</span> <span class="na">b</span><span class="p">:</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span> <span class="p">}</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>You can also nest your objects, like <code class="language-plaintext highlighter-rouge">'foo[bar][baz]=foobarbaz'</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre><span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">foo[bar][baz]=foobarbaz</span><span class="dl">'</span><span class="p">),</span> <span class="p">{</span>
    <span class="na">foo</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">bar</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">baz</span><span class="p">:</span> <span class="dl">'</span><span class="s1">foobarbaz</span><span class="dl">'</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>By default, when nesting objects <strong>qs</strong> will only parse up to 5 children deep. This means if you attempt to parse a string like
<code class="language-plaintext highlighter-rouge">'a[b][c][d][e][f][g][h][i]=j'</code> your resulting object will be:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">expected</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">a</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">b</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">c</span><span class="p">:</span> <span class="p">{</span>
                <span class="na">d</span><span class="p">:</span> <span class="p">{</span>
                    <span class="na">e</span><span class="p">:</span> <span class="p">{</span>
                        <span class="na">f</span><span class="p">:</span> <span class="p">{</span>
                            <span class="dl">'</span><span class="s1">[g][h][i]</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">j</span><span class="dl">'</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">};</span>
<span class="kd">var</span> <span class="nx">string</span> <span class="o">=</span> <span class="dl">'</span><span class="s1">a[b][c][d][e][f][g][h][i]=j</span><span class="dl">'</span><span class="p">;</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">string</span><span class="p">),</span> <span class="nx">expected</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>This depth can be overridden by passing a <code class="language-plaintext highlighter-rouge">depth</code> option to <code class="language-plaintext highlighter-rouge">qs.parse(string, [options])</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">deep</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a[b][c][d][e][f][g][h][i]=j</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">depth</span><span class="p">:</span> <span class="mi">1</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">deep</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="p">{</span> <span class="na">b</span><span class="p">:</span> <span class="p">{</span> <span class="dl">'</span><span class="s1">[c][d][e][f][g][h][i]</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">j</span><span class="dl">'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The depth limit helps mitigate abuse when <strong>qs</strong> is used to parse user input, and it is recommended to keep it a reasonably small number.</p>

<p>For similar reasons, by default <strong>qs</strong> will only parse up to 1000 parameters. This can be overridden by passing a <code class="language-plaintext highlighter-rouge">parameterLimit</code> option:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">limited</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a=b&amp;c=d</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">parameterLimit</span><span class="p">:</span> <span class="mi">1</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">limited</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>To bypass the leading question mark, use <code class="language-plaintext highlighter-rouge">ignoreQueryPrefix</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">prefixed</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">?a=b&amp;c=d</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">ignoreQueryPrefix</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">prefixed</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="na">c</span><span class="p">:</span> <span class="dl">'</span><span class="s1">d</span><span class="dl">'</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>An optional delimiter can also be passed:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">delimited</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a=b;c=d</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">delimiter</span><span class="p">:</span> <span class="dl">'</span><span class="s1">;</span><span class="dl">'</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">delimited</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="na">c</span><span class="p">:</span> <span class="dl">'</span><span class="s1">d</span><span class="dl">'</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Delimiters can be a regular expression too:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">regexed</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a=b;c=d,e=f</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">delimiter</span><span class="p">:</span> <span class="sr">/</span><span class="se">[</span><span class="sr">;,</span><span class="se">]</span><span class="sr">/</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">regexed</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="na">c</span><span class="p">:</span> <span class="dl">'</span><span class="s1">d</span><span class="dl">'</span><span class="p">,</span> <span class="na">e</span><span class="p">:</span> <span class="dl">'</span><span class="s1">f</span><span class="dl">'</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Option <code class="language-plaintext highlighter-rouge">allowDots</code> can be used to enable dot notation:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">withDots</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a.b=c</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">allowDots</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">withDots</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="p">{</span> <span class="na">b</span><span class="p">:</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span> <span class="p">}</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>If you have to deal with legacy browsers or services, there‚Äôs
also support for decoding percent-encoded octets as iso-8859-1:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">oldCharset</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a=%A7</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">charset</span><span class="p">:</span> <span class="dl">'</span><span class="s1">iso-8859-1</span><span class="dl">'</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">oldCharset</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">¬ß</span><span class="dl">'</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Some services add an initial <code class="language-plaintext highlighter-rouge">utf8=‚úì</code> value to forms so that old
Internet Explorer versions are more likely to submit the form as
utf-8. Additionally, the server can check the value against wrong
encodings of the checkmark character and detect that a query string
or <code class="language-plaintext highlighter-rouge">application/x-www-form-urlencoded</code> body was <em>not</em> sent as
utf-8, eg. if the form had an <code class="language-plaintext highlighter-rouge">accept-charset</code> parameter or the
containing page had a different character set.</p>

<p><strong>qs</strong> supports this mechanism via the <code class="language-plaintext highlighter-rouge">charsetSentinel</code> option.
If specified, the <code class="language-plaintext highlighter-rouge">utf8</code> parameter will be omitted from the
returned object. It will be used to switch to <code class="language-plaintext highlighter-rouge">iso-8859-1</code>/<code class="language-plaintext highlighter-rouge">utf-8</code>
mode depending on how the checkmark is encoded.</p>

<p><strong>Important</strong>: When you specify both the <code class="language-plaintext highlighter-rouge">charset</code> option and the
<code class="language-plaintext highlighter-rouge">charsetSentinel</code> option, the <code class="language-plaintext highlighter-rouge">charset</code> will be overridden when
the request contains a <code class="language-plaintext highlighter-rouge">utf8</code> parameter from which the actual
charset can be deduced. In that sense the <code class="language-plaintext highlighter-rouge">charset</code> will behave
as the default charset rather than the authoritative charset.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">detectedAsUtf8</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8=%E2%9C%93&amp;a=%C3%B8</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">charset</span><span class="p">:</span> <span class="dl">'</span><span class="s1">iso-8859-1</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">charsetSentinel</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">detectedAsUtf8</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">√∏</span><span class="dl">'</span> <span class="p">});</span>

<span class="c1">// Browsers encode the checkmark as &amp;#10003; when submitting as iso-8859-1:</span>
<span class="kd">var</span> <span class="nx">detectedAsIso8859_1</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">utf8=%26%2310003%3B&amp;a=%F8</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">charset</span><span class="p">:</span> <span class="dl">'</span><span class="s1">utf-8</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">charsetSentinel</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">detectedAsIso8859_1</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">√∏</span><span class="dl">'</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>If you want to decode the <code class="language-plaintext highlighter-rouge">&amp;#...;</code> syntax to the actual character,
you can specify the <code class="language-plaintext highlighter-rouge">interpretNumericEntities</code> option as well:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">detectedAsIso8859_1</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a=%26%239786%3B</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span>
    <span class="na">charset</span><span class="p">:</span> <span class="dl">'</span><span class="s1">iso-8859-1</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">interpretNumericEntities</span><span class="p">:</span> <span class="kc">true</span>
<span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">detectedAsIso8859_1</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">‚ò∫</span><span class="dl">'</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>It also works when the charset has been detected in <code class="language-plaintext highlighter-rouge">charsetSentinel</code>
mode.</p>

<h3 id="parsing-arrays">Parsing Arrays</h3>

<p><strong>qs</strong> can also parse arrays using a similar <code class="language-plaintext highlighter-rouge">[]</code> notation:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">withArray</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a[]=b&amp;a[]=c</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">withArray</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">]</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>You may specify an index as well:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">withIndexes</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a[1]=c&amp;a[0]=b</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">withIndexes</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">]</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Note that the only difference between an index in an array and a key in an object is that the value between the brackets must be a number
to create an array. When creating arrays with specific indices, <strong>qs</strong> will compact a sparse array to only the existing values preserving
their order:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">noSparse</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a[1]=b&amp;a[15]=c</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">noSparse</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">]</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Note that an empty string is also a value, and will be preserved:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">withEmptyString</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a[]=&amp;a[]=b</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">withEmptyString</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="p">[</span><span class="dl">''</span><span class="p">,</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">]</span> <span class="p">});</span>

<span class="kd">var</span> <span class="nx">withIndexedEmptyString</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a[0]=b&amp;a[1]=&amp;a[2]=c</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">withIndexedEmptyString</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">''</span><span class="p">,</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">]</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>qs</strong> will also limit specifying indices in an array to a maximum index of <code class="language-plaintext highlighter-rouge">20</code>. Any array members with an index of greater than <code class="language-plaintext highlighter-rouge">20</code> will
instead be converted to an object with the index as the key. This is needed to handle cases when someone sent, for example, <code class="language-plaintext highlighter-rouge">a[999999999]</code> and it will take significant time to iterate over this huge array.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">withMaxIndex</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a[100]=b</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">withMaxIndex</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="p">{</span> <span class="dl">'</span><span class="s1">100</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span> <span class="p">}</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>This limit can be overridden by passing an <code class="language-plaintext highlighter-rouge">arrayLimit</code> option:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">withArrayLimit</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a[1]=b</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">arrayLimit</span><span class="p">:</span> <span class="mi">0</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">withArrayLimit</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="p">{</span> <span class="dl">'</span><span class="s1">1</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span> <span class="p">}</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>To disable array parsing entirely, set <code class="language-plaintext highlighter-rouge">parseArrays</code> to <code class="language-plaintext highlighter-rouge">false</code>.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">noParsingArrays</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a[]=b</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">parseArrays</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">noParsingArrays</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="p">{</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span> <span class="p">}</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>If you mix notations, <strong>qs</strong> will merge the two items into an object:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">mixedNotation</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a[0]=b&amp;a[b]=c</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">mixedNotation</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="p">{</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span> <span class="p">}</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>You can also create arrays of objects:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">arraysOfObjects</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a[][b]=c</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">arraysOfObjects</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="p">[{</span> <span class="na">b</span><span class="p">:</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span> <span class="p">}]</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Some people use comma to join array, <strong>qs</strong> can parse it:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">arraysOfObjects</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a=b,c</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">comma</span><span class="p">:</span> <span class="kc">true</span> <span class="p">})</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">arraysOfObjects</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">]</span> <span class="p">})</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<p>(<em>this cannot convert nested objects, such as <code class="language-plaintext highlighter-rouge">a={b:1},{c:d}</code></em>)</p>

<h3 id="stringifying">Stringifying</h3>

<p><a href="#preventEval"></a></p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">object</span><span class="p">,</span> <span class="p">[</span><span class="nx">options</span><span class="p">]);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>When stringifying, <strong>qs</strong> by default URI encodes output. Objects are stringified as you would expect:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span> <span class="p">}),</span> <span class="dl">'</span><span class="s1">a=b</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="p">{</span> <span class="na">b</span><span class="p">:</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span> <span class="p">}</span> <span class="p">}),</span> <span class="dl">'</span><span class="s1">a%5Bb%5D=c</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>This encoding can be disabled by setting the <code class="language-plaintext highlighter-rouge">encode</code> option to <code class="language-plaintext highlighter-rouge">false</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">unencoded</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="p">{</span> <span class="na">b</span><span class="p">:</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span> <span class="p">}</span> <span class="p">},</span> <span class="p">{</span> <span class="na">encode</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">unencoded</span><span class="p">,</span> <span class="dl">'</span><span class="s1">a[b]=c</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Encoding can be disabled for keys by setting the <code class="language-plaintext highlighter-rouge">encodeValuesOnly</code> option to <code class="language-plaintext highlighter-rouge">true</code>:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">encodedValues</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span>
    <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="na">c</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">d</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">e=f</span><span class="dl">'</span><span class="p">],</span> <span class="na">f</span><span class="p">:</span> <span class="p">[[</span><span class="dl">'</span><span class="s1">g</span><span class="dl">'</span><span class="p">],</span> <span class="p">[</span><span class="dl">'</span><span class="s1">h</span><span class="dl">'</span><span class="p">]]</span> <span class="p">},</span>
    <span class="p">{</span> <span class="na">encodeValuesOnly</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span>
<span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">encodedValues</span><span class="p">,</span><span class="dl">'</span><span class="s1">a=b&amp;c[0]=d&amp;c[1]=e%3Df&amp;f[0][0]=g&amp;f[1][0]=h</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>This encoding can also be replaced by a custom encoding method set as <code class="language-plaintext highlighter-rouge">encoder</code> option:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">encoded</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="p">{</span> <span class="na">b</span><span class="p">:</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span> <span class="p">}</span> <span class="p">},</span> <span class="p">{</span> <span class="na">encoder</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Passed in values `a`, `b`, `c`</span>
    <span class="k">return</span> <span class="c1">// Return encoded string</span>
<span class="p">}})</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p><em>(Note: the <code class="language-plaintext highlighter-rouge">encoder</code> option does not apply if <code class="language-plaintext highlighter-rouge">encode</code> is <code class="language-plaintext highlighter-rouge">false</code>)</em></p>

<p>Analogue to the <code class="language-plaintext highlighter-rouge">encoder</code> there is a <code class="language-plaintext highlighter-rouge">decoder</code> option for <code class="language-plaintext highlighter-rouge">parse</code> to override decoding of properties and values:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">decoded</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">x=z</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">decoder</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">str</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Passed in values `x`, `z`</span>
    <span class="k">return</span> <span class="c1">// Return decoded string</span>
<span class="p">}})</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Examples beyond this point will be shown as though the output is not URI encoded for clarity. Please note that the return values in these cases <em>will</em> be URI encoded during real usage.</p>

<p>When arrays are stringified, by default they are given explicit indices:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">d</span><span class="dl">'</span><span class="p">]</span> <span class="p">});</span>
<span class="c1">// 'a[0]=b&amp;a[1]=c&amp;a[2]=d'</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>You may override this by setting the <code class="language-plaintext highlighter-rouge">indices</code> option to <code class="language-plaintext highlighter-rouge">false</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">d</span><span class="dl">'</span><span class="p">]</span> <span class="p">},</span> <span class="p">{</span> <span class="na">indices</span><span class="p">:</span> <span class="kc">false</span> <span class="p">});</span>
<span class="c1">// 'a=b&amp;a=c&amp;a=d'</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>You may use the <code class="language-plaintext highlighter-rouge">arrayFormat</code> option to specify the format of the output array:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">]</span> <span class="p">},</span> <span class="p">{</span> <span class="na">arrayFormat</span><span class="p">:</span> <span class="dl">'</span><span class="s1">indices</span><span class="dl">'</span> <span class="p">})</span>
<span class="c1">// 'a[0]=b&amp;a[1]=c'</span>
<span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">]</span> <span class="p">},</span> <span class="p">{</span> <span class="na">arrayFormat</span><span class="p">:</span> <span class="dl">'</span><span class="s1">brackets</span><span class="dl">'</span> <span class="p">})</span>
<span class="c1">// 'a[]=b&amp;a[]=c'</span>
<span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">]</span> <span class="p">},</span> <span class="p">{</span> <span class="na">arrayFormat</span><span class="p">:</span> <span class="dl">'</span><span class="s1">repeat</span><span class="dl">'</span> <span class="p">})</span>
<span class="c1">// 'a=b&amp;a=c'</span>
<span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">]</span> <span class="p">},</span> <span class="p">{</span> <span class="na">arrayFormat</span><span class="p">:</span> <span class="dl">'</span><span class="s1">comma</span><span class="dl">'</span> <span class="p">})</span>
<span class="c1">// 'a=b,c'</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>When objects are stringified, by default they use bracket notation:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="p">{</span> <span class="na">b</span><span class="p">:</span> <span class="p">{</span> <span class="na">c</span><span class="p">:</span> <span class="dl">'</span><span class="s1">d</span><span class="dl">'</span><span class="p">,</span> <span class="na">e</span><span class="p">:</span> <span class="dl">'</span><span class="s1">f</span><span class="dl">'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">});</span>
<span class="c1">// 'a[b][c]=d&amp;a[b][e]=f'</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>You may override this to use dot notation by setting the <code class="language-plaintext highlighter-rouge">allowDots</code> option to <code class="language-plaintext highlighter-rouge">true</code>:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="p">{</span> <span class="na">b</span><span class="p">:</span> <span class="p">{</span> <span class="na">c</span><span class="p">:</span> <span class="dl">'</span><span class="s1">d</span><span class="dl">'</span><span class="p">,</span> <span class="na">e</span><span class="p">:</span> <span class="dl">'</span><span class="s1">f</span><span class="dl">'</span> <span class="p">}</span> <span class="p">}</span> <span class="p">},</span> <span class="p">{</span> <span class="na">allowDots</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="c1">// 'a.b.c=d&amp;a.b.e=f'</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Empty strings and null values will omit the value, but the equals sign (=) remains in place:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="dl">''</span> <span class="p">}),</span> <span class="dl">'</span><span class="s1">a=</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Key with no values (such as an empty object or array) will return nothing:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="p">[]</span> <span class="p">}),</span> <span class="dl">''</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="p">{}</span> <span class="p">}),</span> <span class="dl">''</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="p">[{}]</span> <span class="p">}),</span> <span class="dl">''</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="p">{</span> <span class="na">b</span><span class="p">:</span> <span class="p">[]}</span> <span class="p">}),</span> <span class="dl">''</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="p">{</span> <span class="na">b</span><span class="p">:</span> <span class="p">{}}</span> <span class="p">}),</span> <span class="dl">''</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Properties that are set to <code class="language-plaintext highlighter-rouge">undefined</code> will be omitted entirely:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="kc">undefined</span> <span class="p">}),</span> <span class="dl">'</span><span class="s1">a=</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The query string may optionally be prepended with a question mark:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="na">c</span><span class="p">:</span> <span class="dl">'</span><span class="s1">d</span><span class="dl">'</span> <span class="p">},</span> <span class="p">{</span> <span class="na">addQueryPrefix</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}),</span> <span class="dl">'</span><span class="s1">?a=b&amp;c=d</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>The delimiter may be overridden with stringify as well:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre><span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="na">c</span><span class="p">:</span> <span class="dl">'</span><span class="s1">d</span><span class="dl">'</span> <span class="p">},</span> <span class="p">{</span> <span class="na">delimiter</span><span class="p">:</span> <span class="dl">'</span><span class="s1">;</span><span class="dl">'</span> <span class="p">}),</span> <span class="dl">'</span><span class="s1">a=b;c=d</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>If you only want to override the serialization of <code class="language-plaintext highlighter-rouge">Date</code> objects, you can provide a <code class="language-plaintext highlighter-rouge">serializeDate</code> option:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">7</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="nx">date</span> <span class="p">}),</span> <span class="dl">'</span><span class="s1">a=1970-01-01T00:00:00.007Z</span><span class="dl">'</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/:/g</span><span class="p">,</span> <span class="dl">'</span><span class="s1">%3A</span><span class="dl">'</span><span class="p">));</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span>
    <span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="nx">date</span> <span class="p">},</span> <span class="p">{</span> <span class="na">serializeDate</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">getTime</span><span class="p">();</span> <span class="p">}</span> <span class="p">}),</span>
    <span class="dl">'</span><span class="s1">a=7</span><span class="dl">'</span>
<span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>You may use the <code class="language-plaintext highlighter-rouge">sort</code> option to affect the order of parameter keys:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">alphabeticalSort</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">a</span><span class="p">.</span><span class="nx">localeCompare</span><span class="p">(</span><span class="nx">b</span><span class="p">);</span>
<span class="p">}</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">,</span> <span class="na">z</span><span class="p">:</span> <span class="dl">'</span><span class="s1">y</span><span class="dl">'</span><span class="p">,</span> <span class="na">b</span> <span class="p">:</span> <span class="dl">'</span><span class="s1">f</span><span class="dl">'</span> <span class="p">},</span> <span class="p">{</span> <span class="na">sort</span><span class="p">:</span> <span class="nx">alphabeticalSort</span> <span class="p">}),</span> <span class="dl">'</span><span class="s1">a=c&amp;b=f&amp;z=y</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Finally, you can use the <code class="language-plaintext highlighter-rouge">filter</code> option to restrict which keys will be included in the stringified output.
If you pass a function, it will be called for each key to obtain the replacement value. Otherwise, if you
pass an array, it will be used to select properties and array indices for stringification:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre></td><td class="rouge-code"><pre><span class="kd">function</span> <span class="nx">filterFunc</span><span class="p">(</span><span class="nx">prefix</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">prefix</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
        <span class="c1">// Return an `undefined` value to omit a property.</span>
        <span class="k">return</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">prefix</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">e[f]</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">value</span><span class="p">.</span><span class="nx">getTime</span><span class="p">();</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">prefix</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">e[g][0]</span><span class="dl">'</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">value</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="nx">value</span><span class="p">;</span>
<span class="p">}</span>
<span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="na">c</span><span class="p">:</span> <span class="dl">'</span><span class="s1">d</span><span class="dl">'</span><span class="p">,</span> <span class="na">e</span><span class="p">:</span> <span class="p">{</span> <span class="na">f</span><span class="p">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">123</span><span class="p">),</span> <span class="na">g</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="p">}</span> <span class="p">},</span> <span class="p">{</span> <span class="na">filter</span><span class="p">:</span> <span class="nx">filterFunc</span> <span class="p">});</span>
<span class="c1">// 'a=b&amp;c=d&amp;e[f]=123&amp;e[g][0]=4'</span>
<span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="na">c</span><span class="p">:</span> <span class="dl">'</span><span class="s1">d</span><span class="dl">'</span><span class="p">,</span> <span class="na">e</span><span class="p">:</span> <span class="dl">'</span><span class="s1">f</span><span class="dl">'</span> <span class="p">},</span> <span class="p">{</span> <span class="na">filter</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">e</span><span class="dl">'</span><span class="p">]</span> <span class="p">});</span>
<span class="c1">// 'a=b&amp;e=f'</span>
<span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">c</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">d</span><span class="dl">'</span><span class="p">],</span> <span class="na">e</span><span class="p">:</span> <span class="dl">'</span><span class="s1">f</span><span class="dl">'</span> <span class="p">},</span> <span class="p">{</span> <span class="na">filter</span><span class="p">:</span> <span class="p">[</span><span class="dl">'</span><span class="s1">a</span><span class="dl">'</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span> <span class="p">});</span>
<span class="c1">// 'a[0]=b&amp;a[2]=d'</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="handling-of-null-values">Handling of <code class="language-plaintext highlighter-rouge">null</code> values</h3>

<p>By default, <code class="language-plaintext highlighter-rouge">null</code> values are treated like empty strings:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">withNull</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="dl">''</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">withNull</span><span class="p">,</span> <span class="dl">'</span><span class="s1">a=&amp;b=</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Parsing does not distinguish between parameters with and without equal signs. Both are converted to empty strings.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">equalsInsensitive</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a&amp;b=</span><span class="dl">'</span><span class="p">);</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">equalsInsensitive</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="dl">''</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="dl">''</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>To distinguish between <code class="language-plaintext highlighter-rouge">null</code> values and empty strings use the <code class="language-plaintext highlighter-rouge">strictNullHandling</code> flag. In the result string the <code class="language-plaintext highlighter-rouge">null</code>
values have no <code class="language-plaintext highlighter-rouge">=</code> sign:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">strictNull</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="dl">''</span> <span class="p">},</span> <span class="p">{</span> <span class="na">strictNullHandling</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">strictNull</span><span class="p">,</span> <span class="dl">'</span><span class="s1">a&amp;b=</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>To parse values without <code class="language-plaintext highlighter-rouge">=</code> back to <code class="language-plaintext highlighter-rouge">null</code> use the <code class="language-plaintext highlighter-rouge">strictNullHandling</code> flag:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">parsedStrictNull</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a&amp;b=</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">strictNullHandling</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">parsedStrictNull</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span> <span class="na">b</span><span class="p">:</span> <span class="dl">''</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>To completely skip rendering keys with <code class="language-plaintext highlighter-rouge">null</code> values, use the <code class="language-plaintext highlighter-rouge">skipNulls</code> flag:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">nullsSkipped</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">b</span><span class="dl">'</span><span class="p">,</span> <span class="na">c</span><span class="p">:</span> <span class="kc">null</span><span class="p">},</span> <span class="p">{</span> <span class="na">skipNulls</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">nullsSkipped</span><span class="p">,</span> <span class="dl">'</span><span class="s1">a=b</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>If you‚Äôre communicating with legacy systems, you can switch to <code class="language-plaintext highlighter-rouge">iso-8859-1</code>
using the <code class="language-plaintext highlighter-rouge">charset</code> option:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">iso</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">√¶</span><span class="p">:</span> <span class="dl">'</span><span class="s1">√¶</span><span class="dl">'</span> <span class="p">},</span> <span class="p">{</span> <span class="na">charset</span><span class="p">:</span> <span class="dl">'</span><span class="s1">iso-8859-1</span><span class="dl">'</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">iso</span><span class="p">,</span> <span class="dl">'</span><span class="s1">%E6=%E6</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Characters that don‚Äôt exist in <code class="language-plaintext highlighter-rouge">iso-8859-1</code> will be converted to numeric
entities, similar to what browsers do:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">numeric</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">‚ò∫</span><span class="dl">'</span> <span class="p">},</span> <span class="p">{</span> <span class="na">charset</span><span class="p">:</span> <span class="dl">'</span><span class="s1">iso-8859-1</span><span class="dl">'</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">numeric</span><span class="p">,</span> <span class="dl">'</span><span class="s1">a=%26%239786%3B</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>You can use the <code class="language-plaintext highlighter-rouge">charsetSentinel</code> option to announce the character by
including an <code class="language-plaintext highlighter-rouge">utf8=‚úì</code> parameter with the proper encoding if the checkmark,
similar to what Ruby on Rails and others do when submitting forms.</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">sentinel</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">‚ò∫</span><span class="dl">'</span> <span class="p">},</span> <span class="p">{</span> <span class="na">charsetSentinel</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">sentinel</span><span class="p">,</span> <span class="dl">'</span><span class="s1">utf8=%E2%9C%93&amp;a=%E2%98%BA</span><span class="dl">'</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">isoSentinel</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">√¶</span><span class="dl">'</span> <span class="p">},</span> <span class="p">{</span> <span class="na">charsetSentinel</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">charset</span><span class="p">:</span> <span class="dl">'</span><span class="s1">iso-8859-1</span><span class="dl">'</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">isoSentinel</span><span class="p">,</span> <span class="dl">'</span><span class="s1">utf8=%26%2310003%3B&amp;a=%E6</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="dealing-with-special-character-sets">Dealing with special character sets</h3>

<p>By default the encoding and decoding of characters is done in <code class="language-plaintext highlighter-rouge">utf-8</code>,
and <code class="language-plaintext highlighter-rouge">iso-8859-1</code> support is also built in via the <code class="language-plaintext highlighter-rouge">charset</code> parameter.</p>

<p>If you wish to encode querystrings to a different character set (i.e.
<a href="https://en.wikipedia.org/wiki/Shift_JIS">Shift JIS</a>) you can use the
<a href="https://github.com/martinheidegger/qs-iconv"><code class="language-plaintext highlighter-rouge">qs-iconv</code></a> library:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">encoder</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">qs-iconv/encoder</span><span class="dl">'</span><span class="p">)(</span><span class="dl">'</span><span class="s1">shift_jis</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">shiftJISEncoded</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">stringify</span><span class="p">({</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">„Åì„Çì„Å´„Å°„ÅØÔºÅ</span><span class="dl">'</span> <span class="p">},</span> <span class="p">{</span> <span class="na">encoder</span><span class="p">:</span> <span class="nx">encoder</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">equal</span><span class="p">(</span><span class="nx">shiftJISEncoded</span><span class="p">,</span> <span class="dl">'</span><span class="s1">a=%82%B1%82%F1%82%C9%82%BF%82%CD%81I</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>This also works for decoding of query strings:</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="kd">var</span> <span class="nx">decoder</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">qs-iconv/decoder</span><span class="dl">'</span><span class="p">)(</span><span class="dl">'</span><span class="s1">shift_jis</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">obj</span> <span class="o">=</span> <span class="nx">qs</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="dl">'</span><span class="s1">a=%82%B1%82%F1%82%C9%82%BF%82%CD%81I</span><span class="dl">'</span><span class="p">,</span> <span class="p">{</span> <span class="na">decoder</span><span class="p">:</span> <span class="nx">decoder</span> <span class="p">});</span>
<span class="nx">assert</span><span class="p">.</span><span class="nx">deepEqual</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="p">{</span> <span class="na">a</span><span class="p">:</span> <span class="dl">'</span><span class="s1">„Åì„Çì„Å´„Å°„ÅØÔºÅ</span><span class="dl">'</span> <span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="rfc-3986-and-rfc-1738-space-encoding">RFC 3986 and RFC 1738 space encoding</h3>

<p>RFC3986 used as default option and encodes ‚Äò ‚Äò to <em>%20</em> which is backward compatible.
In the same time, output can be stringified as per RFC1738 with ‚Äò ‚Äò equal to ‚Äò+‚Äô.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>assert.equal(qs.stringify({ a: 'b c' }), 'a=b%20c');
assert.equal(qs.stringify({ a: 'b c' }, { format : 'RFC3986' }), 'a=b%20c');
assert.equal(qs.stringify({ a: 'b c' }, { format : 'RFC1738' }), 'a=b+c');
</pre></td></tr></tbody></table></code></pre></div></div>


            </div>
                        <details>
                <summary><h2>Comment with GitHub Utterances</h2></summary>
                <script src="https://utteranc.es/client.js"
        repo="ULL-MII-SYTWS-1920/ull-mii-sytws-1920.github.io"
        issue-term="pathname"
        label="SYTWS"
        theme="dark-blue"
        crossorigin="anonymous"
        async>
</script>
            </details>
            
            <details>
                <summary>
                   <h2>Comment with Disqus</h2> 
                </summary>              
                



<div id="disqus_thread">
    thread de discusion
</div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: 
EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: 
       https://disqus.com/admin/universalcode/#configuration-variables*/

/*
var disqus_config = function () {
   this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
   this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/

(function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = 'https://https-ull-mii-sytws-1920-github-io.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
   (d.head || d.body).appendChild(s);
})();

</script>

<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            

 

            </details>

            <!-- -->
            <!-- end bar -->

            <!-- Mathjax Support  -->
            <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>


        </section>
    </div>

    
</body>

</html>
