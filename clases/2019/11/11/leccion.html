<!doctype html>
<html lang=" en-US ">

<head>
    <meta charset="utf-8">
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link rel="stylesheet" href="/assets/css/style.css?v=a8db9f5ed3bfce1c7849f44f99b16371e6a97696">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="/assets/js/respond.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <!--[if lt IE 8]>
    <link rel="stylesheet" href="/assets/css/ie.css">
    <![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

</head>

<body>
    <div id="header">
        <nav>
    <li><a href="/search" title="search">&#x1F50D;</a></li>
    <!--
    <li><a href="#sytwstoc" title="Table of Contents">‚â°</a></li>
    -->

    
    
    <li><a href="https://github.com/ULL-MII-SYTWS-1920/ull-mii-sytws-1920.github.io/tree/master//_posts/2019-11-11-leccion.md" title="Edit this page at GitHub">üêô</a>
    
    <li><a href="/references.html" title="Bibliograf√≠a">&#x1f4da</a></li>
    <li><a href="/practicas.html" title="Pr√°cticas">&#x270d</a></li>
    
    <li><a href="/clases.html" title="Clases">üë®‚Äçüè´</a></li>

    <li><a href="/" title="Home page">&#x1f3e0</a></li>
    <li><a href="/tema0-presentacion/" title="Tema 0: Presentaci√≥n">0</a></li>
    <li><a href="/tema1-introduccion/" title="Tema 1: Introducci√≥n">1</a></li>
    <li><a href="/tema2-async/" title="Tema 2: Async">2</a></li>
    <li><a href="/tema3-web/" title="Tema 3: Web">3</a></li>
    <li><a href="/tema4-devops/" title="Tema 4: Devop">4</a></li>
    
</nav>

    </div>
    <!-- end header -->


    <div class="wrapper">

        <section>
            
<div id="title">
        <h1>Sistemas y Tecnolog√≠as Web: Servidor</h1>
        <p> Master de II. ULL. 1er cuatrimestre. 2020/2021</p>
        <hr>
        <span class="credits left">Organization <a href="https://github.com/ULL-MII-SYTWS-2021" target="_blank">ULL-MII-SYTWS-2021</a></span>
        <span class="credits left"> &nbsp; Classroom <a href="https://classroom.github.com/classrooms/68184806-ull-mii-sytws-2021" target="_blank">ULL-MII-SYTWS-2021</a></span>
        <span class="credits left"> &nbsp; Campus Virtual <a href="https://campusdoctoradoyposgrado.ull.es/course/view.php?id=2020111300" target="_blank">SYTWS</a></span>
        <span class="credits left"> &nbsp; Chat <a href="https://chat.google.com/u/1/room/AAAAp18fCE8" target="_blank">Chat</a></span>
        <span class="credits left"> &nbsp; Profesor <a href="https://www.ull.es/apps/guias/guias/view_teacher_niu/745/(%3FPcrguezl.*)/" target="_blank">Casiano</a></span>
    </div>

<!--

<div id="title">
    <h1>Sistemas y Tecnolog√≠as Web: Servidor</h1>
    <p> Master de II. ULL. 1er cuatrimestre. 2020/2021</p>
    <hr>
    <span class="credits left">Organization <a href="https://github.com/ULL-MII-SYTWS"
            target="_blank">ULL-MII-SYTWS</a></span>
    <span class="credits left"> &nbsp; Github Classroom <a
            href="https://classroom.github.com/classrooms/55384072-master-de-ingenieria-informatica-sistemas-y-tecnologias-web-servidor-classroom"
            target="_blank">SYTWS 19/20</a></span>
    <span class="credits left"> &nbsp; Campus Virtual <a
            href="https://campusvirtual.ull.es/1920/course/view.php?id=201913778" target="_blank">SYTWS
            19/20</a></span>
    <span class="credits left"> &nbsp; Profesor <a
            href="https://www.ull.es/apps/guias/guias/view_teacher_niu/588/(%3FPcrguezl.*)/"" target="
            _blank">Casiano</a></span>
</div>
-->    

            
            



            <h2 >Table of Contents</h2>
            
            <ul id="sytwstoc">
  <li><a href="#clase-del-lunes-11112019-semana-c">Clase del Lunes 11/11/2019 (Semana C)</a>
    <ul>
      <li><a href="#chapter-20-of-eloquent-js">Chapter 20 of Eloquent JS</a>
        <ul>
          <li><a href="#on-the-section-the-http-module-of-the-book">On the section <em>The HTTP module</em> of the book</a>
            <ul>
              <li><a href="#simple-server">Simple Server</a></li>
              <li><a href="#simple-client">Simple Client</a></li>
              <li><a href="#running-server-and-client">Running Server and Client</a></li>
              <li><a href="#debugging-nodejs-programs-with-chrome">Debugging Node.js programs with Chrome</a></li>
              <li><a href="#testing-the-server-with-rest-clients">Testing the Server with Rest Clients</a></li>
            </ul>
          </li>
          <li><a href="#la-pr√°ctica-p3-t1-c3-http-exercises-from-chapter-20-of-ejs">La pr√°ctica p3-t1-c3-http: Exercises from Chapter 20 of EJS</a></li>
          <li><a href="#soluciones-a-la-pr√°ctica">Soluciones a la pr√°ctica</a></li>
          <li><a href="#v√≠deo-sobre-la-resoluci√≥n-de-la-pr√°ctica-del-cap√≠tulo-20">V√≠deo sobre la resoluci√≥n de la Pr√°ctica del cap√≠tulo 20</a>
            <ul>
              <li><a href="#idempotent-rest-apis">Idempotent REST APIs</a></li>
              <li><a href="#status">STATUS</a></li>
            </ul>
          </li>
          <li><a href="#gulp"><a href="/tema1-introduccion/build-tools">Gulp</a></a></li>
        </ul>
      </li>
      <li><a href="#resources-and-references-for-this-lesson">Resources and References for this Lesson</a></li>
      <li><a href="#chapter-3-networking-with-sockets">Chapter 3: Networking with Sockets</a></li>
    </ul>
  </li>
</ul>
          

            <div class="container">
                <h1 id="clase-del-lunes-11112019-semana-c">Clase del Lunes 11/11/2019 (Semana C)</h1>

<h2 id="chapter-20-of-eloquent-js">Chapter 20 of Eloquent JS</h2>

<ul>
  <li><a href="/tema1-introduccion/practicas/p3-t1-c3-http/">https://ull-mii-sytws-1920.github.io/tema1-introduccion/practicas/p3-t1-c3-http/</a></li>
</ul>

<h3 id="on-the-section-the-http-module-of-the-book">On the section <em>The HTTP module</em> of the book</h3>

<ul>
  <li>See section <a href="https://eloquentjavascript.net/20_node.html#the-http-module">of the EJS book: The HTTP module</a></li>
</ul>

<h4 id="simple-server">Simple Server</h4>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>~/.../2019-11-04/the-http-module(master)]$ pwd -P
/Users/casiano/local/src/javascript/eloquent-javascript/chapter20-node-js/chapter20-node-js-crguezl/the-http-module
[~/.../2019-11-04/the-http-module(master)]$ cat simple-server.js 
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="mi">8000</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">ip</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">ip</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">http</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">const</span> <span class="nx">ins</span> <span class="o">=</span><span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">util</span><span class="dl">'</span><span class="p">).</span><span class="nx">inspect</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">inspect</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="nx">ins</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="p">{</span><span class="na">depth</span><span class="p">:</span> <span class="kc">null</span><span class="p">});</span>

<span class="c1">//  The Server object returned by createServer is an EventEmitter</span>
<span class="kd">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="cm">/*
    The function passed as an argument to createServer is called every
    time a client tries to connect to the server. The request and
    response variables are objects representing the incoming and outgoing
    data. The first contains information about the request, such as its
    url property, which tells us to what URL the request was made.
  */</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">writeHead</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="p">{</span><span class="dl">"</span><span class="s2">Content-Type</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">text/html</span><span class="dl">"</span><span class="p">});</span>
  <span class="cm">/*
    To send something back, you call methods on the response object.

    writeHead, will write out the response headers. 
    You give it the status code (200 for "OK" in this case)
    and an object that contains header values. 
    Here we tell the client
    that we will be sending back an HTML document.
    */</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s2">`
&lt;h1&gt;Hello!&lt;/h1&gt;
&lt;p&gt;You asked for 
&lt;code&gt;
</span><span class="p">${</span><span class="nx">request</span><span class="p">.</span><span class="nx">url</span><span class="p">}</span><span class="s2"> 
&lt;!-- The url is the full URL without the server, protocol or port. --&gt;
&lt;/code&gt;
using the </span><span class="p">${</span><span class="nx">request</span><span class="p">.</span><span class="nx">method</span><span class="p">}</span><span class="s2"> method
&lt;/p&gt;
&lt;p&gt;Your headers:&lt;/p&gt; 
&lt;pre&gt;
</span><span class="p">${</span><span class="nx">ins</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">headers</span><span class="p">)}</span><span class="s2">
&lt;/pre&gt;
`</span><span class="p">);</span>

  <span class="cm">/*
  The actual response body (the document itself) is sent with
  response.write. You are allowed to call this method multiple times
  if you want to send the response piece by piece, possibly streaming
  data to the client as it becomes available.
  */</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
  <span class="cm">/* Finally, response.end signals the end of the response. */</span>
<span class="p">});</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">listen</span><span class="p">(</span><span class="nx">port</span><span class="p">,</span> <span class="nx">ip</span><span class="p">.</span><span class="nx">address</span><span class="p">(),</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="kd">const</span> <span class="nx">host</span> <span class="o">=</span> <span class="nx">server</span><span class="p">.</span><span class="nx">address</span><span class="p">().</span><span class="nx">address</span><span class="p">;</span>
  <span class="kd">const</span> <span class="nx">port</span> <span class="o">=</span> <span class="nx">server</span><span class="p">.</span><span class="nx">address</span><span class="p">().</span><span class="nx">port</span><span class="p">;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Example app listening at http://%s:%s</span><span class="dl">'</span><span class="p">,</span> <span class="nx">host</span><span class="p">,</span> <span class="nx">port</span><span class="p">)</span>
<span class="p">});</span>
<span class="cm">/*
The call to server.listen causes the server to start waiting for
connections on port 8000. This is the reason you have to connect
to localhost:8000, rather than just localhost (which would use the
default port, 80), to speak to this server.
*/</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>In fact, the Server object returned by <code class="language-plaintext highlighter-rouge">createServer</code> is an <a href="https://nodejs.org/api/events.html#events_class_eventemitter">EventEmitter</a>, 
and what we have here is just shorthand for creating a server object and then adding the listener later:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">server</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">createServer</span><span class="p">();</span>
<span class="nx">server</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">request</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">response</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// the same kind of magic happens here!</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>When an HTTP request hits the server, node calls the request handler function with a few handy objects for dealing with the transaction, <code class="language-plaintext highlighter-rouge">request</code> and <code class="language-plaintext highlighter-rouge">response</code>.</p>

<p>The <code class="language-plaintext highlighter-rouge">url</code> is the full URL without the server, protocol or port. For a typical URL, this means everything after and including the third forward slash.</p>

<p>All headers are represented in lower-case only, regardless of how the client actually sent them. This simplifies the task of parsing headers for whatever purpose.</p>

<ul>
  <li><a href="https://nodejs.org/api/http.html#http_http_createserver_options_requestlistener">http.createServer</a> doc</li>
  <li><a href="https://nodejs.org/api/net.html#net_server_listen">server.listen</a> doc</li>
  <li><a href="https://nodejs.org/api/http.html#http_response_writehead_statuscode_statusmessage_headers">response.writeHead</a> doc</li>
  <li><a href="https://nodejs.org/api/http.html#http_response_write_chunk_encoding_callback">response.write</a> doc</li>
  <li>
    <p><a href="https://nodejs.org/api/http.html#http_response_end_data_encoding_callback">response.end</a></p>
  </li>
  <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers">HTTP Headers at developer.mozilla</a>
    <ul>
      <li><a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Type">Content-Type</a></li>
    </ul>
  </li>
</ul>

<h4 id="simple-client">Simple Client</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>/Users/casiano/local/src/javascript/eloquent-javascript/chapter20-node-js/chapter20-node-js-crguezl/the-http-module
[~/.../2019-11-04/the-http-module(master)]$ 
[~/.../2019-11-04/the-http-module(master)]$ cat simple-client.js 
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="nx">portNumber</span> <span class="o">=</span> <span class="mi">8000</span><span class="p">;</span>
<span class="kd">const</span> <span class="nx">ip</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">ip</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">util</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">util</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">http</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">http</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">request</span> <span class="o">=</span> <span class="nx">http</span><span class="p">.</span><span class="nx">request</span><span class="p">(</span>
<span class="p">{</span> 
  <span class="cm">/* 
    The first argument to request configures the request, telling Node
    what server to talk to, what path to request from that server, which
    method to use, and so on.
  */</span>
  <span class="na">hostname</span><span class="p">:</span> <span class="nx">ip</span><span class="p">.</span><span class="nx">address</span><span class="p">(),</span> <span class="c1">// "eloquentjavascript.net",</span>
  <span class="na">port</span><span class="p">:</span> <span class="nx">portNumber</span><span class="p">,</span>
  <span class="na">path</span><span class="p">:</span> <span class="dl">"</span><span class="s2">/20_node.html</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">method</span><span class="p">:</span> <span class="dl">"</span><span class="s2">GET</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">headers</span><span class="p">:</span> <span class="p">{</span><span class="na">Accept</span><span class="p">:</span> <span class="dl">"</span><span class="s2">text/html</span><span class="dl">"</span><span class="p">}</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">response</span><span class="p">)</span> <span class="p">{</span>
  <span class="cm">/*
    The second argument is the function that should be called when a
    response comes in. It is given an object that allows us to inspect
    the response, for example to find out its status code.
  */</span>
  <span class="nx">response</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">data</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">chunk</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="c1">// chunk is a buffer. Avoid console.log since introduces a newline</span>
    <span class="nx">process</span><span class="p">.</span><span class="nx">stdout</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="nx">chunk</span><span class="p">.</span><span class="nx">toString</span><span class="p">());</span>
  <span class="p">});</span>

  <span class="nx">response</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">error</span><span class="dl">'</span><span class="p">,</span> <span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
     <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="nx">response</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="dl">'</span><span class="s1">end</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
     <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">reached end of response </span><span class="dl">'</span><span class="p">);</span>
  <span class="p">});</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">Server responded with status code</span><span class="dl">"</span><span class="p">,</span>
              <span class="nx">response</span><span class="p">.</span><span class="nx">statusCode</span><span class="p">);</span>
  <span class="c1">//console.log(util.inspect(response), true, 1);</span>
  <span class="cm">/*
    Just like the response object we saw in the server, the object
    returned by request allows us to stream data into the request with
    the write method and finish the request with the end method. The
    example does not use write because GET requests should not contain
    data in their request body.
  */</span>
<span class="p">});</span>
<span class="cm">/*
   This method signals to the server that all of the response headers and body have been sent; 
   that server should consider this message complete. 
   The method, response.end(), MUST be called on each response.
*/</span>
<span class="nx">request</span><span class="p">.</span><span class="nx">end</span><span class="p">();</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li><a href="https://nodejs.org/api/http.html#http_class_http_clientrequest">http.request</a> doc</li>
  <li><a href="https://nodejs.org/api/http.html#http_class_http_clientrequest">Class http.clientRequest</a> doc. It represents an in-progress request whose header has already been queued</li>
</ul>

<h4 id="running-server-and-client">Running Server and Client</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>[~/.../chapter20-node-js-crguezl/the-http-module(master)]$ node simple-server.js 
Example app listening at http://10.150.22.51:8000
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="rouge-code"><pre>~/.../chapter20-node-js-crguezl/the-http-module(master)]$ node simple-client.js 
Server responded with status code 200

&lt;h1&gt;Hello!&lt;/h1&gt;
&lt;p&gt;You asked for 
&lt;code&gt;
/20_node.html 
&lt;!-- The url is the full URL without the server, protocol or port. --&gt;
&lt;/code&gt;
using the GET method
&lt;/p&gt;
&lt;p&gt;Your headers:&lt;/p&gt; 
&lt;pre&gt;
{ accept: 'text/html', host: '10.150.22.51:8000', connection: 'close' }
&lt;/pre&gt;
reached end of response 
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="debugging-nodejs-programs-with-chrome">Debugging Node.js programs with Chrome</h4>

<ul>
  <li><a href="/tema1-introduccion/node.html#debugging-nodejs">V√©ase el apartado <em>Debugging Node.js</em> en la secci√≥n Node.js del Tema 1</a></li>
</ul>

<h4 id="testing-the-server-with-rest-clients">Testing the Server with Rest Clients</h4>

<p>API testing requires an application to interact with API. 
Rest API can be tested with tools like:</p>

<ul>
  <li>Insomnia</li>
  <li>Postman</li>
  <li>Curl</li>
</ul>

<p><strong>Example Using Insomnia</strong></p>

<p><img src="/assets/images/insomnia.png" alt="request with inmsomnia" /></p>

<ul>
  <li><a href="https://insomnia.rest/">https://insomnia.rest/</a></li>
</ul>

<p><strong>Example Using Postman</strong></p>

<p><img src="/assets/images/postman.png" alt="request with Postman" /></p>

<ul>
  <li><a href="https://www.getpostman.com/">https://www.getpostman.com/</a></li>
  <li><a href="https://www.sitepoint.com/api-building-and-testing-made-easier-with-postman/">API Building and Testing Made Easier with Postman</a></li>
  <li><a href="https://learning.getpostman.com/docs/postman/launching_postman/installation_and_updates/">Postman docs</a></li>
</ul>

<p><strong>Example Using curl</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre></td><td class="rouge-code"><pre>~/.../chapter20-node-js-crguezl/the-http-module(master)]$ curl -d "param1=value1&amp;param2=value2" -H "Content-Type: application/x-www-form-urlencoded" -X POST http://10.150.22.51:8000/data

&lt;h1&gt;Hello!&lt;/h1&gt;
&lt;p&gt;You asked for 
&lt;code&gt;
/data 
&lt;!-- The url is the full URL without the server, protocol or port. --&gt;
&lt;/code&gt;
using the POST method
&lt;/p&gt;
&lt;p&gt;Your headers:&lt;/p&gt; 
&lt;pre&gt;
{
  host: '10.150.22.51:8000',
  'user-agent': 'curl/7.54.0',
  accept: '*/*',
  'content-type': 'application/x-www-form-urlencoded',
  'content-length': '27'
}
&lt;/pre&gt;
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li><a href="https://gist.github.com/subfuzion/08c5d85437d5d4f00e58">curl.md</a> gist illustrating the use of curl</li>
</ul>

<h3 id="la-pr√°ctica-p3-t1-c3-http-exercises-from-chapter-20-of-ejs">La pr√°ctica p3-t1-c3-http: Exercises from Chapter 20 of EJS</h3>

<h3 id="soluciones-a-la-pr√°ctica">Soluciones a la pr√°ctica</h3>

<ul>
  <li>
    <p>Este repo <a href="https://github.com/ULL-MII-SYTWS-2021/eloquent-javascript-exercises/tree/master/20_3_public_space">https://github.com/ULL-MII-SYTWS-1920/eloquent-javascript-exercises/tree/master/20_3_public_space</a> es un fork de un repo con soluciones por Juan Irache modificadas</p>
  </li>
  <li>
    <p>Soluciones por el autor del libro Marijn Haverbeke: <a href="https://eloquentjavascript.net/code/">https://eloquentjavascript.net/code/</a></p>
  </li>
</ul>

<h3 id="v√≠deo-sobre-la-resoluci√≥n-de-la-pr√°ctica-del-cap√≠tulo-20">V√≠deo sobre la resoluci√≥n de la Pr√°ctica del cap√≠tulo 20</h3>

<p>Explicando como escribir y comprobar el funcionamiento del requisito <em>DIRECTORY CREATION</em> usando insomnia:</p>

<ul>
  <li><a href="https://youtu.be/gxrBEfjgRdM"><img src="https://img.youtube.com/vi/gxrBEfjgRdM/sddefault.jpg" alt="https://img.youtube.com/vi/gxrBEfjgRdM/sddefault.jpg" /></a></li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>[~/.../chapter20-nodejs/juanIrache-20_3_public_space(master)]$ pwd -P
/Users/casiano/local/src/javascript/eloquent-javascript-3/juanIrache-solutions/20_3_public_space
</pre></td></tr></tbody></table></code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre></td><td class="rouge-code"><pre><span class="kd">const</span> <span class="p">{</span><span class="nx">mkdir</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">fs</span><span class="dl">"</span><span class="p">).</span><span class="nx">promises</span><span class="p">;</span>

<span class="nx">methods</span><span class="p">.</span><span class="nx">MKCOL</span> <span class="o">=</span> <span class="k">async</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">urlPath</span><span class="p">(</span><span class="nx">request</span><span class="p">.</span><span class="nx">url</span><span class="p">);</span>
  <span class="kd">let</span> <span class="nx">stats</span><span class="p">;</span>
  <span class="k">try</span> <span class="p">{</span>
    <span class="nx">stats</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">stat</span><span class="p">(</span><span class="nx">path</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">.</span><span class="nx">code</span> <span class="o">!=</span> <span class="dl">"</span><span class="s2">ENOENT</span><span class="dl">"</span><span class="p">)</span> <span class="k">throw</span> <span class="nx">error</span><span class="p">;</span>
    <span class="k">await</span> <span class="nx">mkdir</span><span class="p">(</span><span class="nx">path</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">{</span><span class="na">status</span><span class="p">:</span> <span class="mi">204</span><span class="p">};</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">stats</span><span class="p">.</span><span class="nx">isDirectory</span><span class="p">())</span> <span class="k">return</span> <span class="p">{</span><span class="na">status</span><span class="p">:</span> <span class="mi">204</span><span class="p">};</span>
  <span class="k">else</span> <span class="k">return</span> <span class="p">{</span><span class="na">status</span><span class="p">:</span> <span class="mi">400</span><span class="p">,</span> <span class="na">body</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Not a directory</span><span class="dl">"</span><span class="p">};</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="idempotent-rest-apis">Idempotent REST APIs</h4>

<ul>
  <li><a href="https://restfulapi.net/idempotent-rest-apis">Idempotent REST APIs</a></li>
</ul>

<p><strong>HTTP POST</strong></p>

<p>Generally ‚Äì not necessarily ‚Äì <code class="language-plaintext highlighter-rouge">POST</code> APIs are used to <strong>create</strong> a new resource on server. So when you invoke the same POST request N times, you will have N new resources on the server. So, <em><code class="language-plaintext highlighter-rouge">POST</code> is not idempotent</em>.</p>

<p><strong>HTTP PUT</strong></p>

<p>Generally ‚Äì not necessarily ‚Äì <code class="language-plaintext highlighter-rouge">PUT</code> APIs are used to <strong>update</strong> the resource state. If you invoke a <code class="language-plaintext highlighter-rouge">PUT</code> API N times, the very first request will update the resource; then rest N-1 requests will just overwrite the same resource state again and again ‚Äì effectively not changing anything. Hence, <em><code class="language-plaintext highlighter-rouge">PUT</code> is idempotent</em>.</p>

<p><strong>HTTP DELETE</strong></p>

<p>When you invoke N similar <code class="language-plaintext highlighter-rouge">DELETE</code> requests, first request will delete the resource and response will be <code class="language-plaintext highlighter-rouge">200</code> (OK) or <code class="language-plaintext highlighter-rouge">204</code> (No Content). Other N-1 requests will return <code class="language-plaintext highlighter-rouge">404</code> (Not Found). Clearly, the response is different from first request, <strong>but there is no change of state for any resource</strong> on server side because original resource is already deleted. So, <em><code class="language-plaintext highlighter-rouge">DELETE</code> is idempotent</em>.</p>

<p>Please keep in mind if some systems may have <code class="language-plaintext highlighter-rouge">DELETE</code> APIs like this:</p>

<p><strong>DELETE /item/last</strong></p>

<p>In the above case, calling operation N times will delete N resources ‚Äì hence <code class="language-plaintext highlighter-rouge">DELETE</code> is not idempotent in this case. In this case, a good suggestion might be to change above API to <code class="language-plaintext highlighter-rouge">POST</code> ‚Äì because <code class="language-plaintext highlighter-rouge">POST</code> is not idempotent.</p>

<p><strong>POST /item/last</strong></p>

<p>Now, this is closer to HTTP spec ‚Äì hence more REST compliant.</p>

<h4 id="status">STATUS</h4>

<ul>
  <li><a href="https://httpstatuses.com/204">204</a></li>
</ul>

<h3 id="gulp"><a href="/tema1-introduccion/build-tools">Gulp</a></h3>

<h2 id="resources-and-references-for-this-lesson">Resources and References for this Lesson</h2>

<ul>
  <li><a href="/clases/2019/11/11/leccion.html">This class in GitHub pages</a></li>
  <li><a href="https://github.com/ULL-MII-SYTWS-2021/eloquent-javascript-exercises">See this repo with the solutions by Juan Irache to EJS exercises</a>
    <ul>
      <li><a href="https://github.com/ULL-MII-SYTWS-2021/eloquent-javascript-exercises/tree/master/20_3_public_space">20_3_a_public_space</a></li>
    </ul>
  </li>
  <li>See section <a href="https://eloquentjavascript.net/20_node.html#the-http-module">of the EJS book: The HTTP module</a></li>
  <li><a href="https://nodejs.org/es/docs/guides/anatomy-of-an-http-transaction/">Node.js docs: Anatomy of an HTTP Transaction</a></li>
</ul>

<h2 id="chapter-3-networking-with-sockets">Chapter 3: Networking with Sockets</h2>

<ul>
  <li><a href="/tema2-async/sockets">Apuntes del tema Sockets</a></li>
  <li><a href="https://github.com/ULL-MII-SYTWS-2021/books-shared">Material suplementario</a></li>
  <li><a href="/tema2-async/practicas/p4-t2-networking/">Descripci√≥n de la pr√°ctica tema2-async/practicas/p4-t2-networking/</a></li>
  <li><a href="/tema4-devops/github-actions">GitHub Actions</a></li>
  <li>
    <p><a href="https://github.com/ULL-MII-SYTWS-2021/p4-t2-networking-crguezl">Repo de ejemplo con una soluci√≥n y GitHub Actions p4-t2-networking-crguezl</a></p>

    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>  [~/.../github-actions-learning/p4-t2-net-github-actions-crguezl(master)]$ pwd -P
  /Users/casiano/local/src/github-actions-learning/p4-t2-net-github-actions-crguezl
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
</ul>


            </div>
                        <details>
                <summary><h2>Comment with GitHub Utterances</h2></summary>
                <script src="https://utteranc.es/client.js"
        repo="ULL-MII-SYTWS-1920/ull-mii-sytws-1920.github.io"
        issue-term="pathname"
        label="SYTWS"
        theme="dark-blue"
        crossorigin="anonymous"
        async>
</script>
            </details>
            
            <details>
                <summary>
                   <h2>Comment with Disqus</h2> 
                </summary>              
                



<div id="disqus_thread">
    thread de discusion
</div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: 
EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: 
       https://disqus.com/admin/universalcode/#configuration-variables*/

/*
var disqus_config = function () {
   this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
   this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/

(function() { // DON'T EDIT BELOW THIS LINE
  var d = document, s = d.createElement('script');
  s.src = 'https://https-ull-mii-sytws-1920-github-io.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
   (d.head || d.body).appendChild(s);
})();

</script>

<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            

 

            </details>
        </section>
    
    </div>


    
</body>

</html>
